<!--[*]
[script]brick_product_list.php[/script]
[mcss=eshop]eshop.css[/mcss]
[css]/vendor/alloyui/scrollview-base/assets/scrollview-base-core.css[/css]

[desc]
    Список продукции.

    Параметры:

    notchildlist - не выводить продукцию каталога и его подкаталогов в один лист (по умолчанию TRUE).

    forcontent - этот кирпич используется для построения страницы списка 
                    продукции (запрос из content/products.html). При этом принимается во внимание
                    настройки модуля из конфига.
[/desc]

[p=forcontent]false[/p]
[p=limit]24[/p]
[p=notchildlist]true[/p]

[p=display][/p]

[p=imgw]200[/p]
[p=imgh]200[/p]

[p=cfg][/p]

[p=scroll][/p]
[p=scrollwidth]974[/p]

[p=classcolumn]col-md-4 col-sm-6[/p]

[bkvar=scrolldiv]

    <div class="scroll-container">
        <div class="scroll-wrap">
            <a id="{v#brickid}-scl-bprev" class="scroll-btn-prev scroll-horz-button"> </a>

            <div id="{v#brickid}-scl-content" class="scroll-content">
                {v#result}
            </div>

            <a id="{v#brickid}-scl-bnext" class="scroll-btn-next scroll-horz-button"> </a>
        </div>
    </div>

    <script type="text/javascript" charset="utf-8">
        /*
        YUI().use('scrollview', 'scrollview-paginator', function(Y) {

            var scrollView = new Y.ScrollView({
                id: "#{v#brickid}-scl",
                srcNode: '#{v#brickid}-scl-content',
                flick: {
                    minDistance: 10,
                    minVelocity: 0.3,
                    axis: "x"
                }
            });

            scrollView.plug(Y.Plugin.ScrollViewPaginator, {
                selector: '.proditem'
            });

            scrollView.render();

            Y.one('#{v#brickid}-scl-bnext').on('click', Y.bind(scrollView.pages.next, scrollView.pages));
            Y.one('#{v#brickid}-scl-bprev').on('click', Y.bind(scrollView.pages.prev, scrollView.pages));
        });
        /**/
    </script>

    <style>
        /* To layout horizontal LIs */
        #{v#brickid}-scl-content {
            white-space:nowrap;
        }

        #{v#brickid}-scl-content .proditem {
            display:inline-block;
            background-color:#fff;
        }

        /* For IE 6/7 - needs inline block hack */
        #{v#brickid}-scl-content .proditem {
            *display:inline;
            *zoom:1;
        }
    </style>

[/bkvar]

[bkvar=table]
    <div class="row">
        {v#rows}
    </div>
[/bkvar]

[bkvar=row]
    <div class="{v#classcolumn}">

        <div class="product_item" itemscope itemtype="http://schema.org/ItemPage">

            <div class="thumbnail">
                <a href="{v#link}" title="{v#title}" class="tmbfoto">
                    {v#image}
                </a>
                <div class="caption">
                    <div class="title">
                        <a title="{v#title}" href="{v#link}"><span itemprop="name">{v#title}</span></a>
                    </div>

                    <div class="price">
                        <span>{v#price} {#brick.product_list.7}</span>
                    </div>
                    {v#buybutton}

                </div>

                {v#special}

            </div>
        </div>
    </div>
[/bkvar]

[bkvar=img]
    <img src="{v#src}" alt="{v#title}" itemprop="image" />
[/bkvar]

[bkvar=imgempty]
    <img src="/modules/eshop/images/empty.gif" alt="{v#title}" />
[/bkvar]

[bkvar=special]
    <div class="special"><a title="{v#title}" href="{v#link}">{v#pr_spec}</a></div>
[/bkvar]

[bkvar=pr_new]
    <img src="/modules/eshop/images/pr_new.png" class="pr_new" alt="{#brick.product_list.4}" title="{#brick.product_list.4}" />
[/bkvar]

[bkvar=pr_akc]
    <img src="/modules/eshop/images/pr_akc.png" class="pr_akc" alt="{#brick.product_list.5}" title="{#brick.product_list.5}" />
[/bkvar]

[bkvar=pr_hit]
    <img src="/modules/eshop/images/pr_hit.png" class="pr_hit" alt="{#brick.product_list.6}" title="{#brick.product_list.6}" />
[/bkvar]

[*]-->
<div id="{v#brickid}" class="product_list">
    {v#result}
</div>
